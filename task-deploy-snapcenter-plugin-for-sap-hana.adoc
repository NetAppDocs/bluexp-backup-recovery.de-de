---
sidebar: sidebar 
permalink: task-deploy-snapcenter-plugin-for-sap-hana.html 
keywords: Cloud Manager, BlueXP, SnapCenter Plug-in for SAP HANA, SAP HANA, database, host, deploy 
summary: Das SnapCenter-Plug-in für SAP HNAN kann auf jedem der SAP HANA Datenbank-Hosts implementiert werden. 
---
= Implementieren Sie das SnapCenter Plug-in für SAP HANA und fügen Sie Datenbank-Hosts hinzu
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Das SnapCenter Plug-in für SAP HANA sollte auf jedem der SAP HANA Datenbank-Hosts implementiert werden. Je nachdem, ob auf dem SAP HANA-Host eine SSH-Schlüsselauthentifizierung aktiviert ist, können Sie eine der Methoden zur Bereitstellung des Plug-ins befolgen.



== Voraussetzungen

* Vergewissern Sie sich, dass auf jedem der SAP HANA-Datenbank-Hosts Java 11 (64-Bit) oder OpenJDK installiert ist.
* Sie sollten die Arbeitsumgebung hinzugefügt und den Connector erstellt haben.
* Stellen Sie sicher, dass der Connector mit der Arbeitsumgebung verbunden ist
* Stellen Sie sicher, dass der BlueXP-Benutzer über die Rolle „Account Admin“ verfügt.
* Sie sollten den SnapCenter-Benutzer erstellt und sudo für den SnapCenter-Benutzer konfiguriert haben. Weitere Informationen finden Sie unter link:task-deploy-snapcenter-plugin-for-sap-hana.html#configure-sudo-for-snapcenter-user["Konfigurieren Sie sudo für SnapCenter-Benutzer."]
* Sie sollten das SnapCenter-Plug-in für SAP HANA bereitgestellt haben, bevor Sie den Datenbank-Host hinzufügen.
* Beim Hinzufügen der SAP HANA-Datenbank-Hosts sollten Sie die HDB-Benutzerspeicherschlüssel hinzufügen. Der HDB Secure User Store-Schlüssel wird verwendet, um die Verbindungsinformationen der SAP HANA Datenbank-Hosts sicher auf dem Client zu speichern und HDBSQL-Client verwendet den sicheren User Store-Schlüssel für die Verbindung zum SAP HANA-Datenbank-Host.
* Für HANA System Replication (HSR) sollten Sie zum Schutz der HANA-Systeme sowohl primäre als auch sekundäre HANA-Systeme manuell registrieren.
* Bei Verwendung der SSH-basierten Bereitstellung sollte die Kommunikation zum SSH-Port aktiviert sein (Standard: 22).
* Für den Anschluss sollte die Kommunikation zum Plug-in-Anschluss (Standard: 8145) aktiviert sein, damit die Vorgänge funktionieren.




== Konfigurieren Sie sudo für SnapCenter-Benutzer

Sie sollten einen SnapCenter-Benutzer erstellen, um das Plug-in bereitzustellen.

*Schritte*

. Melden Sie sich bei der Connector-VM an.
. Laden Sie die Linux-Host-Plug-in-Binärdatei herunter.
`sudo docker exec -it cloudmanager_scs_cloud curl -X GET 'http://127.0.0.1/deploy/downloadLinuxPlugin'`
. Ermitteln Sie den Mount-Pfad für die Basis.
`sudo docker volume ls | grep scs_cloud_volume | awk {'print $2'} | xargs sudo docker volume inspect | grep Mountpoint`
. Kopieren Sie Zeilen 1 bis 16 aus dem `oracle_checksum_scs.txt` Datei befindet sich unter `base_mount_path/version/sc-linux-host-plugin/`
. Melden Sie sich beim SAP HANA Datenbank-Host an, und führen Sie die folgenden Schritte aus:
+
.. Erstellen Sie das SnapCenter-Benutzerkonto, das private Schlüsselpaar, und weisen Sie die Berechtigungen zu.
.. Fügen Sie die Zeilen ein, die Sie in Schritt 4 in die kopiert haben `/etc/sudoers` Datei mit dem Dienstprogramm visudo Linux.
+
Ersetzen Sie in den obigen Zeilen die <LINUXUSER> durch den SnapCenter-Benutzer, den Sie erstellt haben, und speichern Sie sie im Dienstprogramm visuod.







== Implementieren Sie das Plug-in mithilfe der SSH-Schlüsselauthentifizierung

Wenn die SSH-Schlüsselbasierte Authentifizierung auf dem HANA-Host aktiviert ist, können Sie zur Bereitstellung des Plug-ins die folgenden Schritte durchführen. Bevor Sie die Schritte durchführen, stellen Sie sicher, dass die SSH-Verbindung zum Connector aktiviert ist.

*Schritte*

. Melden Sie sich bei der Connector-VM an.
. Ermitteln Sie den Mount-Pfad für die Basis.
`# sudo docker volume ls | grep scs_cloud_volume | awk {'print $2'} | xargs sudo docker volume inspect | grep Mountpoint`
. Plug-in implementieren
`# sudo <base_mount_path>/scripts/hana_plugin_copy_and_install.sh --host <host_name> --sshkey <ssh_key_file> --username <user_name> --port <ssh_port> --pluginport <plugin_port> --installdir <install_dir>`
+
** Host_Name ist der Name des HANA-Hosts, und dies ist ein obligatorischer Parameter.
** ssh_Key_file ist der SSH-Schlüssel, der für die Verbindung zum HANA-Host verwendet wird, und dies ist ein obligatorischer Parameter.
** User_Name: Benutzer mit SSH-Berechtigungen auf dem HANA-Host, und dies ist ein optionaler Parameter. Der Standardwert ist Azureuser.
** ssh_Port: SSH-Port auf dem HANA-Host, und dies ist ein optionaler Parameter. Der Standardwert ist 22.
** Plugin_Port: Port wird vom Plug-in verwendet, und dies ist ein optionaler Parameter. Der Standardwert ist 8145.
** Install_dir: Verzeichnis, in dem das Plug-in bereitgestellt wird, und dies ist ein optionaler Parameter. Standardwert ist /opt.




Nach der Bereitstellung des Plug-ins sollten Sie die hinzufügen link:task-deploy-snapcenter-plugin-for-sap-hana.html#add-sap-hana-database-hosts["SAP HANA Datenbank-Hosts"]



== Stellen Sie das Plug-in manuell bereit

Wenn die SSH-Schlüsselauthentifizierung auf dem HANA-Host nicht aktiviert ist, sollten Sie zur Bereitstellung des Plug-ins die folgenden manuellen Schritte durchführen.

*Schritte*

. Melden Sie sich bei der Connector-VM an.
. Laden Sie die Linux-Host-Plug-in-Binärdatei herunter.
`# sudo docker exec -it cloudmanager_scs_cloud curl -X GET 'http://127.0.0.1/deploy/downloadLinuxPlugin'`
. Ermitteln Sie den Mount-Pfad für die Basis.
`sudo docker volume ls | grep scs_cloud_volume | awk {'print $2'} | xargs sudo docker volume inspect | grep Mountpoint`
. Den Binärpfad des heruntergeladenen Plug-ins abrufen.
`sudo ls <base_mount_path> $(sudo docker ps|grep -Po "cloudmanager_scs_cloud:.*? "|sed -e 's/ *$//'|cut -f2 -d":")/sc-linux-host-plugin/snapcenter_linux_host_plugin_scs.bin`
. Kopieren `snapcenter_linux_host_plugin_scs.bin` Auf jeden der SAP HANA-Datenbank-Hosts entweder mit scp oder anderen alternativen Methoden.
. Führen Sie auf dem SAP HANA-Datenbank-Host den folgenden Befehl aus, um Berechtigungen für die Binärdatei auszuführen.
`chmod +x snapcenter_linux_host_plugin_scs.bin`
. Implementieren Sie das SAP HANA-Plug-in als sudo-SnapCenter-Benutzer.
`./snapcenter_linux_host_plugin_scs.bin -i silent -DSPL_USER=<non-root-user>`
. Kopieren `certificate.p12` Von `<base_mount_path>/client/certificate/` Pfad der Connector-VM zu `/var/opt/snapcenter/spl/etc/` Auf dem Plug-in-Host.
+
.. Navigieren Sie zu `/var/opt/snapcenter/spl/etc` Und führen Sie den keytool-Befehl aus, um das Zertifikat zu importieren.
`keytool -v -importkeystore -srckeystore certificate.p12 -srcstoretype PKCS12 -destkeystore keystore.jks -deststoretype JKS -srcstorepass snapcenter -deststorepass snapcenter -srcalias agentcert -destalias agentcert -noprompt`
.. SPL neu starten: `systemctl restart spl`


. Überprüfen Sie, ob das Plug-in über den Connector erreichbar ist, indem Sie den folgenden Befehl über den Connector ausführen:
+
`docker exec -it cloudmanager_scs_cloud curl -ik \https://<FQDN or IP of the plug-in host>:<plug-in port>/getVersion --cert /config/client/certificate/certificate.pem --key /config/client/certificate/key.pem`





== Fügen Sie SAP HANA Datenbank-Hosts hinzu

Sie sollten SAP HANA-Datenbank-Hosts manuell hinzufügen, um Richtlinien zuzuweisen und Backups zu erstellen. Die automatische Erkennung des SAP HANA-Datenbank-Hosts wird nicht unterstützt.

*Schritte*

. Klicken Sie in der Benutzeroberfläche *BlueXP* auf *Schutz* > *Sicherung und Wiederherstellung* > *Anwendungen*.
. Klicken Sie Auf *Anwendungen Entdecken*.
. Wählen Sie *Cloud Native* > *SAP HANA* und klicken Sie auf *Next*.
. Klicken Sie auf der Seite *Anwendungen* auf *System hinzufügen*.
. Führen Sie auf der Seite *Systemdetails* die folgenden Aktionen durch:
+
.. Wählen Sie den Systemtyp als mandantenfähiger Datenbankcontainer oder einzelner Container aus.
.. Geben Sie den SAP HANA-Systemnamen ein.
.. Geben Sie die SID des SAP HANA-Systems an.
.. (Optional) Geben Sie den HDBSQL OS-Benutzer an.
.. Wählen Sie Plug-in-Host. (Optional) Wenn der Host nicht hinzugefügt wird oder Sie mehrere Hosts hinzufügen möchten, klicken Sie auf *Add Plug-in Host*.
.. Wenn HANA-System mit HANA System Replication konfiguriert ist, aktivieren Sie *HANA System Replication (HSR) System*.
.. Klicken Sie auf * HDB Secure User Store Keys* Textfeld, um Details zu den Benutzerspeicherschlüsseln hinzuzufügen.
+
Geben Sie den Schlüsselnamen, die Systemdetails, den Benutzernamen und das Passwort an und klicken Sie auf *Schlüssel hinzufügen*.

+
Sie können die Benutzerspeicherschlüssel löschen oder ändern.



. Klicken Sie Auf *Weiter*.
. Klicken Sie auf der Seite *Storage Footprint* auf *Speicher hinzufügen* und führen Sie Folgendes aus:
+
.. Wählen Sie die Arbeitsumgebung aus und geben Sie den NetApp Account an.
+
Gehen Sie zur Seite *Canvas*, um eine neue Arbeitsumgebung hinzuzufügen

.. Wählen Sie die erforderlichen Volumes aus.
.. Klicken Sie Auf *Speicher Hinzufügen*.


. Überprüfen Sie alle Details und klicken Sie auf *System hinzufügen*.



NOTE: Der Filter zum Anzeigen eines bestimmten Hosts funktioniert nicht. Wenn Sie im Filter einen Hostnamen angeben, werden alle Hosts angezeigt

Sie können SAP HANA-Systeme mithilfe DER REST-API ändern und entfernen. Vor dem Entfernen des HANA-Systems sollten Sie alle damit verbundenen Backups löschen und den Schutz entfernen.



=== Hinzufügen Von Nicht-Daten-Volumes

Nach dem Hinzufügen eines mandantenfähigen Datenbank-Containers oder eines einzelnen SAP HANA-Systems lassen sich die nicht-Daten-Volumes des HANA-Systems hinzufügen.

*Schritte*

. Klicken Sie in der Benutzeroberfläche *BlueXP* auf *Schutz* > *Sicherung und Wiederherstellung* > *Anwendungen*.
. Klicken Sie Auf *Anwendungen Entdecken*.
. Wählen Sie *Cloud Native* > *SAP HANA* und klicken Sie auf *Next*.
. Klicken Sie auf der Seite *Anwendungen* auf image:icon-action.png["Symbol, um die Aktion auszuwählen"] Entsprechend dem System, für das Sie die nicht-Daten-Volumes hinzufügen möchten, und wählen Sie *System verwalten* > *nicht-Daten-Volume*.




=== Hinzufügen Von Globalen, Nicht Datenbasierten Volumes

Nach dem Hinzufügen eines mandantenfähigen Datenbank-Containers oder eines einzelnen SAP HANA-Systems lassen sich die globalen nicht-Data-Volumes des HANA-Systems hinzufügen.

*Schritte*

. Klicken Sie in der Benutzeroberfläche *BlueXP* auf *Schutz* > *Sicherung und Wiederherstellung* > *Anwendungen*.
. Klicken Sie Auf *Anwendungen Entdecken*.
. Wählen Sie *Cloud Native* > *SAP HANA* und klicken Sie auf *Next*.
. Klicken Sie auf der Seite *Anwendungen* auf *System hinzufügen*.
. Führen Sie auf der Seite *Systemdetails* die folgenden Aktionen durch:
+
.. Wählen Sie aus der Dropdown-Liste Systemtyp *globales Volume ohne Daten* aus.
.. Geben Sie den SAP HANA-Systemnamen ein.
.. Geben Sie die zugehörigen SIDs des SAP HANA-Systems an.
.. Wählen Sie den Plug-in-Host aus
+
(Optional) um mehrere Hosts hinzuzufügen, klicken Sie auf *Add Plug-in Host* und geben Sie den Hostnamen und Port an und klicken Sie auf *Add Host*.

.. Klicken Sie Auf *Weiter*.
.. Überprüfen Sie alle Details und klicken Sie auf *System hinzufügen*.



