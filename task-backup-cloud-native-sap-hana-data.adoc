---
sidebar: sidebar 
permalink: task-backup-cloud-native-sap-hana-data.html 
keywords: cloud native, application data, back up, policy, pre-canned policies, scheduled backups, on-demand backups, cloud manager, BlueXP, add hosts, create policy, SAP HANA Database 
summary: Erstellen von geplanten oder On-Demand-Backups der SAP HANA Datenbank 
---
= Backup der nativen Cloud-SAP HANA-Datenbank
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Bevor Sie ein Backup der SAP HANA-Datenbank erstellen, sollten Sie die SAP HANA-Datenbank-Hosts hinzufügen und entweder eine vordefinierte Richtlinie oder die von Ihnen erstellte Richtlinie zuweisen.



== Erstellen einer Richtlinie zum Schutz von SAP HANA Datenbanken

Sie können Richtlinien erstellen, wenn Sie die vordefinierten Richtlinien nicht verwenden oder bearbeiten möchten.

. Wählen Sie auf der Seite *Anwendungen* aus der Dropdown-Liste Einstellungen die Option *Richtlinien* aus.
. Klicken Sie auf *Create Policy*.
. Geben Sie einen Richtliniennamen an.
. (Optional) Bearbeiten Sie das Format des Namens der Snapshot Kopie.
. Wählen Sie den Richtlinientyp aus.
. Geben Sie den Zeitplan und die Aufbewahrungsdetails an.
. (Optional) Geben Sie die Skripte an. link:task-backup-cloud-native-sap-hana-data.html#prescripts-and-postscripts["Weitere Informationen ."]
. Klicken Sie Auf *Erstellen*.




=== Vorschriften und Postskripte

Sie können Prescripts, Postskripte bereitstellen und Skripte beenden, während Sie eine Richtlinie erstellen. Diese Skripte werden während der Datensicherung auf dem HANA-Host ausgeführt.

Das unterstützte Format für Skripte sind .sh, Python script, Perl script usw.

Das Prescript und das Postscript sollten vom Hostadministrator registriert werden `/opt/NetApp/snapcenter/scc/etc/allowed_commands.config` Datei:

`[root@scspa2622265001 etc]# cat allowed_commands.config
command: mount
command: umount
command: /mnt/scripts/pre_script.sh
command: /mnt/scripts/post_script.sh`



=== Umgebungsvariablen

Für den Backup-Workflow stehen die folgenden Umgebungsvariablen als Teil von prescript und postscript zur Verfügung.

|===
| Umgebungsvariable | Beschreibung 


 a| 
SID
 a| 
Die Systemkennung der zur Wiederherstellung ausgewählten HANA-Datenbank



 a| 
BackupName
 a| 
Für den Wiederherstellungsvorgang ausgewählte Sicherungsname



 a| 
UserStoreKeyNames
 a| 
Konfigurierter Benutzerspeicherschlüssel für die HANA-Datenbank



 a| 
OSDBUser
 a| 
OSDBUser für die HANA-Datenbank konfiguriert



 a| 
PolicyName
 a| 
Nur für geplante Backups



 a| 
Schedule_TYPE
 a| 
Nur für geplante Backups

|===


== Backup der SAP HANA Datenbank erstellen

Sie können entweder eine vordefinierte Richtlinie zuweisen oder eine Richtlinie erstellen und sie dann der Datenbank zuweisen. Sobald die Richtlinie zugewiesen ist, werden die Backups gemäß dem in der Richtlinie definierten Zeitplan erstellt.

*Über diese Aufgabe*

Bei HANA System Replication (HSR) wird der geplante Backup-Job nur für das primäre HANA-System ausgelöst und wenn das System auf das sekundäre HANA-System überfällt, werden die bestehenden Zeitpläne ein Backup auf dem aktuellen primären HANA-System auslösen. Wird die Richtlinie nicht sowohl dem HANA-System zugewiesen, so schlägt nach dem Failover die Planung fehl.

Wenn den HSR-Systemen unterschiedliche Richtlinien zugewiesen werden, wird das geplante Backup sowohl für die Systeme ausgelöst, als auch das Backup schlägt für das sekundäre HANA-System fehl.

*Schritte*

. Wenn die Datenbank nicht mit einer Richtlinie geschützt ist, klicken Sie auf der Seite Anwendungen auf *Richtlinie zuweisen*.
+
Wenn die Datenbank mit einer oder mehreren Richtlinien geschützt ist, können Sie durch Klicken auf weitere Richtlinien zuweisen image:icon-action.png["Symbol, um die Aktion auszuwählen"] > *Richtlinie Zuweisen*.

. Wählen Sie die Richtlinie aus und klicken Sie auf *Zuweisen*.
+
Die Backups werden gemäß dem in der Richtlinie definierten Zeitplan erstellt.

+

NOTE: Das Servicekonto (_SnapCenter-Account-<Account_id>_) wird zur Ausführung der geplanten Backup-Vorgänge verwendet.





== On-Demand-Backup der SAP HANA-Datenbank erstellen

Nach der Zuweisung der Richtlinie können Sie ein On-Demand-Backup der Applikation erstellen.

*Schritte*

. Klicken Sie auf der Seite *Anwendungen* auf image:icon-action.png["Symbol, um die Aktion auszuwählen"] Entsprechend der Anwendung und klicken Sie auf *On-Demand Backup*.
. Wählen Sie den Backup-Typ nach Bedarf aus.
. Wählen Sie für eine Policy-basierte Sicherung die Policy, die Aufbewahrungsebene aus und klicken Sie dann auf *Backup erstellen*.
. Führen Sie zunächst die folgenden Schritte aus:
+
.. Wählen Sie den Aufbewahrungswert aus, und geben Sie den Backup-Namen an.
.. (Optional) Geben Sie die Skripte und den Pfad für die Skripte an.
+
Weitere Informationen finden Sie unter link:task-backup-cloud-native-sap-hana-data.html#prescripts-and-postscripts["Verordnungen und Postskripte"]

.. Klicken Sie Auf *Backup Erstellen*.



